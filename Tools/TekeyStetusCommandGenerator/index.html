<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Tekeyステータステーブル修正コマンド生成ツール</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea { width: 100%; height: 150px; }
    pre { background: #f0f0f0; padding: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>

<h2>Tekeyステータステーブル修正コマンド生成ツール</h2>
<a>項目名の下から選択して、Tekeyのイニシアチブの中身をコピペしてください。<br>1行ごとを名前として読み取り、修正するコマンドを生成します。<br>数字だけの行は無視します。<br>↓のテキストボックスにコピペ<a/>
<textarea id="inputText"></textarea>
<br>

<!-- チェックボックスを追加 -->
<a>チェックボックが入ってる文章が生成されます。<a/>
<div>
  <label><input type="checkbox" id="hp" checked>:HP=</label>
  <label><input type="checkbox" id="hpPlus" checked>:HP+</label>
  <label><input type="checkbox" id="hpMinus" checked>:HP-</label>
  <label><input type="checkbox" id="mpPlus" checked>:MP+</label>
  <label><input type="checkbox" id="mpMinus" checked>:MP-</label>
  <label><input type="checkbox" id="hpCPlus">:HP+C(0+)</label>
  <label><input type="checkbox" id="hpCMinus">:HP-C(0+)</label>
  <label><input type="checkbox" id="mpCPlus">:MP+C(0+)</label>
  <label><input type="checkbox" id="mpCMinus">:MP-C(0+)</label>
</div>
<br>

<button onclick="processInput()">生成</button>

<h2>↓に出力</h2>
<textarea id="output" style="height: 150px;" oninput="this.style.height = ''; this.style.height = this.scrollHeight + 'px';">
サンプル
### //Character0=サンプル
:HP= @[name]:{Character0}
:HP+ @[name]:{Character0}
:HP- @[name]:{Character0}
:MP+ @[name]:{Character0}
:MP- @[name]:{Character0}
###
</textarea>

<script>
function adjustTextareaHeight() {
  const outputTextarea = document.getElementById("output");
  outputTextarea.style.height = '';
  outputTextarea.style.height = outputTextarea.scrollHeight + 'px';
}

function processInput() {
  const input = document.getElementById("inputText").value;
  const lines = input.split(/\r?\n/);

  // 数字以外を抽出（空白・空行も除外）
  const PC = lines.filter(line => isNaN(line.trim()) && line.trim() !== "");

  // チェックボックスの状態を取得
  const includeHP = document.getElementById("hp").checked;
  const includeHPPlus = document.getElementById("hpPlus").checked;
  const includeHPMinus = document.getElementById("hpMinus").checked;
  const includeMPPlus = document.getElementById("mpPlus").checked;
  const includeMPMinus = document.getElementById("mpMinus").checked;
  const includeHPCPlus = document.getElementById("hpCPlus").checked;
  const includeHPCMinus = document.getElementById("hpCMinus").checked;
  const includeMPCPlus = document.getElementById("mpCPlus").checked;
  const includeMPCMinus = document.getElementById("mpCMinus").checked;

  let output = "";
  PC.forEach((name, index) => {
    output += `### //Character${index}=${name}\n`;
    if (includeHP) output += `:HP= @[name]:{Character${index}}\n`;
    if (includeHPPlus) output += `:HP+ @[name]:{Character${index}}\n`;
    if (includeHPMinus) output += `:HP- @[name]:{Character${index}}\n`;
    if (includeMPPlus) output += `:MP+ @[name]:{Character${index}}\n`;
    if (includeMPMinus) output += `:MP- @[name]:{Character${index}}\n`;
    if (includeHPCPlus) output += `:HP+C(0+) @[name]:{Character${index}}\n`;
    if (includeHPCMinus) output += `:HP-C(0+) @[name]:{Character${index}}\n`;
    if (includeMPCPlus) output += `:MP+C(0+) @[name]:{Character${index}}\n`;
    if (includeMPCMinus) output += `:MP-C(0+) @[name]:{Character${index}}\n`;
    output += `###\n\n`;
  });

  const outputTextarea = document.getElementById("output");
  outputTextarea.value = ""; // 手動入力をリセット
  outputTextarea.value = output; // 新しい内容を設定
  adjustTextareaHeight();
}
</script>

</body>
</html>
